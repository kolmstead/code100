<!doctype html>
<html>
<head>
<title>storage</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" text="text/css" href="sdgStyles.css" />
</head>
<body>
  <button id="storeFocusAreas">Reset FocusArea Scores</button>
  <button id="pairs">Get Pairs</button>
  <input id="matchPick" type="text" value=""></input>
  <p id='showUN'></p>
  <p id='showCount'>0</p>
  <div id="left">
  </div>
  <div id="miniHeader"><img src="UNimages/un17banner.png" height="70px"></div>

  <div id="twopics">
    <div id='p1'><img src="//placehold.it/150x150"></div>
    <div id='p2'><img src="//placehold.it/150x150"></div>
  </div>

  <div id="right">right</div>


<script src="unObjects.js"></script>
<script src="makePairs.js"></script>  
<script>

document.getElementById('storeFocusAreas').addEventListener('click', resetScores);
document.getElementById('pairs').addEventListener('click', randomPair);
document.getElementById('matchPick').addEventListener('keyup', function (e) { 
  if ( e.which===13 ) { getTheUN(); }});
document.getElementById('twopics').addEventListener('click',whichClicked);

// Store focusAreas to localStorage with a 0 score  **explore indexeddb and websql**

let theScores = [["un1", 0],["un2", 0],["un3", 0],["un4",0],["un5",0],["un6",0],["un7",0],["un8",0],["un9",0],["un10",0],["un11",0],["un12",0],["un13",0],["un14",0],["un15",0],["un16",0]];

function resetScores () {
  for (i=0; i<theScores.length; i++) {
    if (!localStorage.getItem(theScores[i][0])) {
      localStorage.setItem(theScores[i][0],0);
    } localStorage.setItem(theScores[i][0],0);
  }  
}





// iAmClicked adds a score of 1 to the clicked item
// need to work on scoring methods and algorithm. start by being able to keep score of what is picked
// and maybe store the pair it beat. Need to decide storage method. Maybe mongodb. Maybe node.js. Maybe firebase.

let iAmClicked = '';
function whichClicked (e) {
  let clicked = e.target.parentNode;
  if ( clicked.id === 'p1') {
    let p1score = localStorage.getItem(unPick[0]);
    p1score++;
    localStorage.setItem(unPick[0], p1score )
    randomPair();
  } else { 
    let p2score = localStorage.getItem(unPick[1]);
    p2score++;
    localStorage.setItem(unPick[1], p2score )
    randomPair();
  }
}

// get a random integer in a range
function getRandomIntInclusive(min, max) {
  min = Math.ceil(min);
  max = Math.floor(max);
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

// this function takes the two selected object keys from randomPair() and displays .image property  
function pickUN (a,b) {
  document.getElementById('p1').innerHTML = `<img src=${a.image}>`;
  document.getElementById('p2').innerHTML = `<img src=${b.image}>`;
  document.getElementById('p1').setAttribute('data-unId', a.slug); //check if this attribute is being used
  document.getElementById('p2').setAttribute('data-unId', b.slug); //check if this attribute is being used
};


//show the pair from the index entered in the text box
function getTheUN () {
  let x = document.getElementById('matchPick').value; // the key id of the pair to view
  document.getElementById('showUN').innerHTML = unPairsArray[x];
  let a = focusAreas[unPairsArray[x][0]];
  let b = focusAreas[unPairsArray[x][1]];
  pickUN(a,b);
}

let unPick = ''; 

// get a random index from the unPairsArray; get the object key and use to pass to pickUN()
function randomPair () {
  const x = getRandomIntInclusive(0,unPairsArray.length - 1);
  let a = focusAreas[unPairsArray[x][0]];
  let b = focusAreas[unPairsArray[x][1]];
  unPick = unPairsArray[x];
  pickUN(a,b);
  return unPick;
}
  
</script>
<script src="makePairs.js"></script>
</body>
</html>