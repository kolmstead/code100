<!doctype html>
<html>
<head>
  <title>try svg</title>
  <style>
    button {
      margin: 10px;
    }
    
    #svg {
      padding: 10px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      background-color: #80d7ff;
    }
  </style>
</head>
<body>
<button type="input" id="makeSVG">Click</button>
<button type="input" id="resetButton">Reset</button>
<div id="svg"></div>
<script>

document.getElementById("makeSVG").addEventListener("click", makeSVG); //button to make svg element
document.getElementById("resetButton").addEventListener("click", clearSVG); //button to clear svg elements

  // counter to add unique id to rect elements created by click/makeSVG()function
  let counter = 0;
  function incrementCount () { counter++; console.log(counter); }

function makeSVG () { 

  var svgElement = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  svgElement.setAttribute("height", "52px");
  svgElement.setAttribute("width", "52px");
  svgElement.setAttribute("class", "someSVG");
  document.getElementById("svg").appendChild(svgElement);

  
  var rectElement = document.createElementNS("http://www.w3.org/2000/svg", "rect");
  rectElement.setAttribute("fill", "#283593");
  rectElement.setAttribute("width", "50px");
  rectElement.setAttribute("height", "50px");
  rectElement.setAttribute("x", "1px");
  rectElement.setAttribute("y", "1px");
  rectElement.setAttribute("rx", "10px");
  rectElement.setAttribute("ry", "10px");
  rectElement.setAttribute("id", "Rect" + `${counter}`);
  
  svgElement.appendChild(rectElement);

  // add eventListener (see if there's a better way to do this than the loop)
  // idea: have a counter; when element is made it ads the id from the counter then increments the counter
  listenSVG();
  incrementCount();
}

function clearSVG () {
  
  const clearSVG = document.getElementById("svg");
  clearSVG.innerHTML = "";
}

// function getPosition () {
  
//   var bodyRect = document.body.getBoundingClientRect(),
//     elemRect = element.getBoundingClientRect(),
//     offset   = elemRect.top - bodyRect.top;

// console.log('Element is ' + offset + ' vertical pixels from <body>');

// }


const aRect = document.getElementsByTagName("rect");

function listenSVG () {
  
  for (var i=0; i<aRect.length; i++) {
    aRect[i].addEventListener('click', getTarget);
  }
}

function getTarget (e) {
  console.log(e.target.id);
  console.log(e.target.getBoundingClientRect().right);
}


// try the forEach instead of loop for listeners and ids above.

// Array.from(classname).forEach(function(element) {
//       element.addEventListener('click', myFunction);
//     });


</script>
</body>
</html>

<!--   try forEach
      
      get an input that decides how many times to run makeSVG() and a function to repeat makeSVG by the input amount
      
      make a tool tip that shows the position information on hover
      
      left click changes color
      
      make a way to delete a square
      
      add the rect counter number inside the rect
      -->